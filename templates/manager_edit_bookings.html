{% extends "base.html" %}

{% block title %}Edit Booking{% endblock %}

{% block content %}
<h2>Edit Booking #{{ booking.booking_id }}</h2>

<form method="post" class="edit-booking-form">
    <input type="hidden" name="client_id" value="{{ booking.client_id }}">
    <input type="hidden" name="event_id" value="{{ booking.event_id }}">

    <fieldset>
        <legend>Client Info</legend>
        <label>Name:</label>
        <input type="text" name="client_name" value="{{ booking.client_name }}" required>

        <label>Email:</label>
        <input type="text" name="client_email" value="{{ booking.client_email }}" required>
    </fieldset>

    <fieldset>
        <legend>Event Info</legend>
        <label>Event Name:</label>
        <input type="text" name="event_name" value="{{ booking.event_name }}" required>

        <label>Event Type:</label>
        <select name="event_type" required>
            <option value="Corporate" {% if booking.event_type == "Corporate" %}selected{% endif %}>Corporate</option>
            <option value="Social" {% if booking.event_type == "Social" %}selected{% endif %}>Social</option>
            <option value="Other" {% if booking.event_type == "Other" %}selected{% endif %}>Other</option>
        </select>

        <label>Description:</label>
        <textarea name="description">{{ booking.description }}</textarea>

        <label>Event Date:</label>
        <input type="date" name="event_date" value="{{ booking.event_date|safe }}" required>

        <label>Venue:</label>
        <select name="venue_id" required>
            {% for venue in venues %}
                <option value="{{ venue.venue_id }}" {% if venue.venue_id == booking.venue_id %}selected{% endif %}>
                    {{ venue.venue_name }}
                </option>
            {% endfor %}
        </select>
    </fieldset>

    <button type="submit" class="cta-button">Update Booking</button>
</form>

<form method="post" action="{{ url_for('manager.delete_booking', booking_id=booking.booking_id) }}" onsubmit="return confirm('Are you sure you want to delete this booking?');" style="margin-top: 1em;">
    <button type="submit" class="delete-button">Delete Booking</button>
</form>
{% endblock %}
